function init(){function e(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)}if(video=document.querySelector("#webVidHost"),video.width=window.innerWidth/5,video.height=window.innerHeight/5,video.autoplay=!0,video.style.display="none",window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,!e())return console.log("getUserMedia() is not supported in your browser"),void 0;navigator.getUserMedia({video:!0,audio:!1},function(e){video.src=window.URL.createObjectURL(e)},function(e){console.log("Failed to get a stream due to",e)}),renderer=new THREE.WebGLRenderer,renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement),camera=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,1e3),camera.position.z=400,scene=new THREE.Scene,scene.fog=new THREE.Fog(0,1,1e3),object=new THREE.Object3D,scene.add(object);var t=new THREE.CubeGeometry(400,400,400);videoTexture=new THREE.Texture(video),videoTexture.minFilter=THREE.LinearFilter,videoTexture.magFilter=THREE.LinearFilter;var i=new THREE.MeshBasicMaterial({map:videoTexture,overdraw:!0,side:THREE.DoubleSide}),r=new THREE.Mesh(t,i);object.add(r),scene.add(new THREE.AmbientLight(14540253)),light=new THREE.DirectionalLight(16777215),light.position.set(1,1,1),scene.add(light),composer=new THREE.EffectComposer(renderer),composer.addPass(new THREE.RenderPass(scene,camera));var n=new THREE.ShaderPass(THREE.DotScreenShader);n.uniforms.scale.value=5,n.uniforms.tSize.value=new THREE.Vector2(150,150),composer.addPass(n);var n=new THREE.ShaderPass(THREE.RGBShiftShader);n.uniforms.amount.value=.05,n.renderToScreen=!0,composer.addPass(n),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function animate(){requestAnimationFrame(animate),Date.now(),object.rotation.y+=.01,video.readyState===video.HAVE_ENOUGH_DATA&&(videoTexture.needsUpdate=!0),composer.render()}var camera,scene,renderer,composer,object,light,video,videoTexture;init(),animate();